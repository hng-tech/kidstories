{
    "openapi": "3.0.1",
    "info": {
      "title": "Kid Story APP Api Documentation",
      "description": "Kid Story App  api documentation. <br/> By: TEAM DRAGONLEGEND <br/> Backend API Repository:https://github.com/hnginternship5/kidstories <br/> Backend URL: https://api-kidstories.herokuapp.com ",
      "termsOfService": "https://api-kidstories.herokuapp.com",
      "contact": {
        "email": "interns@hng.tech"
      },
      "license": {
        "name": "Apache 2.0",
        "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
      },
      "version": "1.0.0"
    },
    "servers": [
      {
        "url": "https://api-kidstories.herokuapp.com/api/v1"
      }
    ],
    "tags": [
      {
        "name": "auth",
        "description": "Authentication"
      },
      {
        "name": "user",
        "description": "User"
      },
      {
        "name": "bookmark",
        "description": "Bookmark"
      },
      {
        "name": "category",
        "description": "Category"
      },
      {
        "name": "story",
        "description": "Story"
      },
      {
        "name": "comment",
        "description": "Comment"
      },
      {
        "name": "payment",
        "description": "Payment"
      }
    ],
    "paths": {
        "/auth/register": {
          "post": {
            "tags": [
              "auth"
            ],
            "summary": "Create a user",
            "description": "This is an endpoint to create a user",
            "requestBody": {
              "description": "user object that needs to be added",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/User"
                  }
                }
              },
              "required": true
            },
            "responses": {
                "200":{
                    "description":"user created",
                    "content":{
                        "application/json":{
                            "schema":{
                                "properties":{
                                    "status":{
                                        "type":"string",
                                        "example":"success"
                                    },
                                    "code":{
                                        "type":"integer",
                                        "example":200
                                    },
                                    "message":{
                                        "type":"string",
                                        "example":"ok"
                                    },
                                    "data":{
                                        "$ref":"#/components/schemas/UserDataResponse"
                                    }
                                }
                            }
                        }
                    }
                }
            }
            
          }
        },
        "/auth/login": {
          "post": {
            "tags": [
              "auth"
            ],
            "summary": "Login a user",
            "description": "This is an endpoint for user login",
            "requestBody": {
              "description": "user login information object",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/UserLogin"
                  }
                }
              },
              "required": true
            },
            "responses": {
                "200":{
                    "description":"user login",
                    "content":{
                        "application/json":{
                            "schema":{
                                "properties":{
                                    "status":{
                                        "type":"string",
                                        "example":"success"
                                    },
                                    "code":{
                                        "type":"integer",
                                        "example":200
                                    },
                                    "message":{
                                        "type":"string",
                                        "example":"ok"
                                    },
                                    "data":{
                                        "$ref":"#/components/schemas/UserDataResponse"
                                    }
                                }
                            }
                        }
                    }
                },
                "400": {
                    "description": "Invalid username/password supplied",
                    "content": {}
                }
            }
          }
        },
        "/auth/logout": {
          "post": {
            "tags": [
              "auth"
            ],
            "summary": "Logout a user",
            "description": "This is an endpoint for user logout",
            "responses": {
              "200": {
                "description": "successfully logout",
                "content": {
                    "application/json":{
                        "schema":{
                            "$ref":"#/components/schemas/Status"
                        }
                    }
                }
              }
            }
          }
        },
        "/auth/user": {
          "get": {
            "tags": [
              "auth"
            ],
            "summary": "Get a login user detail",
            "description": "Returns a single user",
            "responses": {
              "200": {
                "description": "successful operation",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref":"#/components/schemas/UserDataResponse"
                    }
                  }
                }
              },
              "404": {
                "description": "User not found",
                "content": {}
              }
            },
            "security":[
              {
                "bearerAuth":[]
              }
            ]
          }
        },
        "/auth/change-password":{
          "put": {
            "tags": [
              "auth"
            ],
            "summary": "Change user password",
            "description": "This can only be done by an authorised user.",
            "requestBody": {
              "description": "Updated user password object",
              "content": {
                "application/json": {
                  "schema": {
                    "$ref": "#/components/schemas/UserPassword"
                  }
                }
              },
              "required": true
            },
            "responses": {
                "200": {
                    "description": "successfully changed",
                    "content": {
                        "application/json":{
                            "schema":{
                                "$ref":"#/components/schemas/Status"
                            }
                        }
                    }
                  },
                "400": {
                    "description": "Invalid user supplied",
                    "content": {}
                }
            },
            "security":[
              {
                "bearerAuth":[]
              }
            ]
          }
        },
        "/users": {
          "get": {
            "tags": [
              "user"
            ],
            "summary": "Get all users ",
            "description": "Returns all users",
            "responses": {
                "200":{
                    "description":"user created",
                    "content":{
                        "application/json":{
                            "schema":{
                                "type":"array",
                                "items":{
                                    "$ref":"#/components/schemas/UserDataResponse"
                                }
                            }
                        }
                    }
                },
                "404": {
                    "description": "Users not found",
                    "content": {}
                }
            }
          }
        },
        "/users/profile": {
            "get": {
              "tags": [
                "user"
              ],
              "summary": "Get a user profile",
              "description": "Returns a single user",
              "responses": {
                "200": {
                  "description": "successful operation",
                  "content": {
                    "application/json": {
                      "schema": {
                        "properties":{
                            "status":{
                                "type":"string",
                                "example":"success"
                            },
                            "code":{
                                "type":"integer",
                                "example":200
                            },
                            "message":{
                                "type":"string",
                                "example":"ok"
                            },
                            "data":{
                                "$ref":"#/components/schemas/User"
                            }
                        }
                      }
                    }
                  }
                },
                "404": {
                  "description": "User not found",
                  "content": {
                      "application/json":{
                          "schema":{
                             "$ref":"#/components/schemas/404"
                          }
                      }
                  }
                }
              },
              "security":[
                    {
                      "bearerAuth":[]
                    }
               ]
            },
            "put": {
              "tags": [
                "user"
              ],
              "summary": "Update a user profile",
              "description": "This can only be done by an authorised user.",
              "requestBody": {
                "description": "Updated user object",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                },
                "required": true
              },
              "responses": {
                "200": {
                    "description": "successful operation",
                    "content": {
                      "application/json": {
                        "schema": {
                          "properties":{
                              "status":{
                                  "type":"string",
                                  "example":"success"
                              },
                              "code":{
                                  "type":"integer",
                                  "example":200
                              },
                              "message":{
                                  "type":"string",
                                  "example":"ok"
                              },
                              "data":{
                                  "$ref":"#/components/schemas/User"
                              }
                          }
                        }
                      }
                    }
                },
                "400": {
                "description": "Invalid user supplied",
                "content": {}
                }
              },
              "security":[
                    {
                      "bearerAuth":[]
                    }
               ]
            }
        },
        "/users/profile/update-image": {
            "put": {
              "tags": [
                "user"
              ],
              "summary": "Update a user profile image",
              "description": "This can only be done by an authorised user.",
              "requestBody": {
                "description": "Updated user object",
                "content": {
                  "application/json": {
                    "schema": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                },
                "required": true
              },
              "responses": {
                "200": {
                  "description": "successfully updated",
                  "content": {
                      "application/json":{
                          "schema":{
                              "$ref":"#/components/schemas/Status"
                          }
                      }
                  }
                },
                "400": {
                  "description": "Invalid user supplied",
                  "content": {}
                }
              },
              "security":[
                    {
                      "bearerAuth":[]
                    }
              ]
            }
        },
        "/bookmarks/stories/{storyId}": {
            "post": {
                "tags": [
                  "bookmark"
                ],
                "summary": "Bookmark a story",
                "description": "This is an endpoint to bookmark a story",
                "parameters": [
                    {
                      "name": "storyId",
                      "in": "path",
                      "description": "Story ID to be bookmark",
                      "required": true,
                      "schema": {
                        "type": "integer"
                      }
                    }
                ],
                "responses": {
                  "200": {
                    "description": "created",
                    "content": {}
                  },
                  "404": {
                    "description": "Story not found",
                    "content": {
                        "application/json":{
                            "schema":{
                               "$ref":"#/components/schemas/404"
                            }
                        }
                    }
                  }
                },
                "security":[
                    {
                      "bearerAuth":[]
                    }
                ]
            },
            "delete": {
                "tags": [
                  "bookmark"
                ],
                "summary": "Deletes a bookmark",
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "description": "Story ID of bookmark to be deleted",
                    "required": true,
                    "schema": {
                      "type": "integer"
                    }
                  }
                ],
                "responses": {
                  "400": {
                    "description": "Invalid ID supplied",
                    "content": {}
                  },
                  "404": {
                    "description": "Bookmark not found",
                    "content": {}
                  }
                },
                "security":[
                    {
                      "bearerAuth":[]
                    }
                ]
            }
        },
        "/bookmarks/stories/{storyId}/status":{
            "get": {
                "tags": [
                  "bookmark"
                ],
                "summary": "Get a bookmark status of a story",
                "description": "Returns a status bookmark of a story",
                "parameters": [
                  {
                    "name": "storyId",
                    "in": "path",
                    "description": "storyId of bookmar",
                    "required": true,
                    "schema": {
                      "type": "integer"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "successful operation",
                    "content": {
                      "application/json": {
                        "schema": {
                          "$ref": "#/components/schemas/Status"
                        }
                      }
                    }
                  },
                  "404": {
                      "description": "Story not found",
                      "content": {
                          "application/json":{
                              "schema":{
                                 "$ref":"#/components/schemas/404"
                              }
                          }
                      }
                  }
                }
              }
        },
        "/categories": {
            "get": {
              "tags": [
                "category"
              ],
              "summary": "Get all categories ",
              "description": "Returns all categories",
              "responses": {
                "200": {
                  "description": "successful operation",
                  "content": {}
                },
                "404": {
                  "description": "Category not found",
                  "content": {}
                }
              }
            }
        },
        "/categories/{id}": {
            "get": {
              "tags": [
                "category"
              ],
              "summary": "Get a category by ID",
              "description": "Returns a single category",
              "parameters": [
                {
                  "name": "id",
                  "in": "path",
                  "description": "ID of category to get",
                  "required": true,
                  "schema": {
                    "type": "integer"
                  }
                }
              ],
              "responses": {
                "200": {
                  "description": "successful operation",
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/CategoryData"
                      }
                    }
                  }
                },
                "404": {
                    "description": "Category not found",
                    "content": {
                        "application/json":{
                            "schema":{
                               "$ref":"#/components/schemas/404"
                            }
                        }
                    }
                }
              }
            }
        },
        "/categories/{id}/stories": {
            "get": {
              "tags": [
                "category"
              ],
              "summary": "Get a category by ID and user",
              "description": "Returns a single category",
              "parameters": [
                {
                  "name": "id",
                  "in": "path",
                  "description": "ID of category to get",
                  "required": true,
                  "schema": {
                    "type": "integer"
                  }
                }
              ],
              "responses": {
                "200": {
                  "description": "successful operation",
                  "content": {
                    "application/json": {
                      "schema": {
                        "$ref": "#/components/schemas/CategoryData"
                      }
                    }
                  }
                },
                "404": {
                    "description": "Category not found",
                    "content": {
                        "application/json":{
                            "schema":{
                               "$ref":"#/components/schemas/404"
                            }
                        }
                    }
                }
              }
            }
        },
        "/stories": {
            "get": {
              "tags": [
                "story"
              ],
              "summary": "Get all stories ",
              "description": "Returns all stories",
              "responses": {
                "200": {
                  "description": "successful operation",
                  "content": {}
                }
              }
            },
            "post": {
                "tags": [
                  "story"
                ],
                "summary": "Create a story",
                "description": "This is an endpoint to create a story",
                "requestBody": {
                    "content": {
                      "multipart/form-data": {
                        "schema": {
                            "$ref": "#/components/schemas/StoryDataCreate"
                        }
                      }
                    }
                },
                "responses": {
                  "200": {
                    "description": "created",
                    "content": {
                        "application/json":{
                            "schema":{
                                "$ref": "#/components/schemas/StoryCreateResponse"
                            }
                        }
                    }
                  }
                },
                "security":[
                    {
                      "bearerAuth":[]
                    }
                ]
            }
        },
        "/stories/{id}":{
            "get":{
                "tags":[
                   "story"
                ],
                "summary":"Get a story by ID",
                "description":"This is an endpoint to get a story",
                "parameters":[
                    {
                        "name":"id",
                        "in":"path",
                        "description":"ID of story to get",
                        "required":true,
                        "schema":{
                            "type":"integer"
                        }
                    }
                ],
                "responses":{
                    "200":{
                        "content":{
                            "application/json":{
                                "schema":{
                                    "$ref":"#/components/schemas/StoryGetResponse"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Story not found",
                        "content": {
                            "application/json":{
                                "schema":{
                                   "$ref":"#/components/schemas/404"
                                }
                            }
                        }
                    }
                }
            },
            "post":{
                "tags":[
                    "story"
                ],
                "summary":"Update a story by ID",
                "description":"An endpoint for story update",
                "parameters":[
                    {
                        "name":"id",
                        "in":"path",
                        "description":"ID of story to update",
                        "required":true,
                        "schema":{
                            "type":"integer"
                        }
                    }
                ],
                "requestBody":{
                    "content":{
                        "multipart/form-data":{
                            "schema":{
                                "$ref":"#/components/schemas/StoryDataCreate"
                            }
                        }
                    }
                },
                "responses":{
                    "200":{
                        "content":{
                            "application/json":{
                                "schema":{
                                    "type":"object",
                                    "status":{
                                        "type":"string",
                                        "example":"success"
                                    },
                                    "code":{
                                        "type":"integer",
                                        "example":200
                                    },
                                    "message":{
                                        "type":"string",
                                        "example":"ok"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Story not found",
                        "content": {
                            "application/json":{
                                "schema":{
                                   "$ref":"#/components/schemas/404"
                                }
                            }
                        }
                    }
                },
                "security":[
                    {
                      "bearerAuth":[]
                    }
                ]
            }
        },
        "/stories/{storyId}/reactions/like":{
            "post":{
                "tags":[
                    "story"
                ],
                "summary":"Like a story by ID",
                "description":"An endpoint to like story",
                "parameters":[
                    {
                        "name":"storyId",
                        "in":"path",
                        "description":"ID of story to like",
                        "required":true,
                        "schema":{
                            "type":"integer"
                        }
                    }
                ],
                "responses":{
                    "200":{
                        "content":{
                            "application/json":{
                                "schema":{
                                    "type":"object",
                                    "status":{
                                        "type":"string",
                                        "example":"success"
                                    },
                                    "code":{
                                        "type":"integer",
                                        "example":200
                                    },
                                    "message":{
                                        "type":"string",
                                        "example":"ok"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Story not found",
                        "content": {
                            "application/json":{
                                "schema":{
                                   "$ref":"#/components/schemas/404"
                                }
                            }
                        }
                      }
                },
                "security":[
                    {
                      "bearerAuth":[]
                    }
                ]
            }
        },
        "/stories/{storyId}/reactions/dislike":{
            "post":{
                "tags":[
                    "story"
                ],
                "summary":"dislike a story by ID",
                "description":"An endpoint to dislike story",
                "parameters":[
                    {
                        "name":"storyId",
                        "in":"path",
                        "description":"ID of story to dislike",
                        "required":true,
                        "schema":{
                            "type":"integer"
                        }
                    }
                ],
                "responses":{
                    "200":{
                        "content":{
                            "application/json":{
                                "schema":{
                                    "type":"object",
                                    "status":{
                                        "type":"string",
                                        "example":"success"
                                    },
                                    "code":{
                                        "type":"integer",
                                        "example":200
                                    },
                                    "message":{
                                        "type":"string",
                                        "example":"ok"
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Story not found",
                        "content": {
                            "application/json":{
                                "schema":{
                                   "$ref":"#/components/schemas/404"
                                }
                            }
                        }
                    }
                },
                "security":[
                    {
                      "bearerAuth":[]
                    }
                ]
            }
        },
        "/comments":{
            "post": {
                "tags": [
                  "comment"
                ],
                "summary": "Create a new comment",
                "description": "This is an endpoint to create a new comment",
                "responses": {
                  "200": {
                    "description": "created",
                    "content": {
                        "application/json": {
                            "schema": {
                              "type": "array",
                              "items": {
                                "$ref": "#/components/schemas/commentData"
                              }
                            }
                        }
                    }
                  }
                },
                "security":[
                    {
                      "bearerAuth":[]
                    }
                ]
            }
        },
        "/comments/{id}": {
            "put": {
                "tags": [
                  "comment"
                ],
                "summary": "Update a story comment",
                "description": "This can only be done by an authorised user.",
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "description": "Comment ID that need to be updated",
                    "required": true,
                    "schema": {
                      "type": "integer"
                    }
                  }
                ],
                "requestBody": {
                  "description": "Updated comment body",
                  "content": {
                    "application/x-www-form-urlencoded": {
                        "schema": {
                          "properties": {
                            "body": {
                              "type": "string",
                              "description": "Updated body of the comment"
                            }
                          }
                        }
                      }
                  },
                  "required": true
                },
                "responses": {
                    "200": {
                        "description": "successful operation",
                        "content": {
                          "application/json": {
                            "schema": {
                              "$ref": "#/components/schemas/CommentDataUpdate"
                            }
                          }
                        }
                    },
                    "404": {
                        "description": "Comment not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                  "properties": {
                                    "message": {
                                      "type": "string",
                                      "example": "No query results for model"
                                    },
                                    "error": {
                                      "type": "string",
                                      "example": "Resource not found"
                                    }
                                  }
                                }
                            }
                        }
                    }
                },
                "security":[
                    {
                        "bearerAuth":[] 
                    }
                ]
              },
            "delete": {
                "tags": [
                  "comment"
                ],
                "summary": "Deletes a comment",
                "parameters": [
                  {
                    "name": "id",
                    "in": "path",
                    "description": "ID of comment to be deleted",
                    "required": true,
                    "schema": {
                      "type": "integer"
                    }
                  }
                ],
                "responses": {
                    "204":{
                        "description":"",
                        "content":{
                            "application/json":{
                                "schema":{
                                    "properties":{
                                        "status":{
                                            "type":"integer",
                                            "example":204
                                        },
                                        "message":{
                                            "type":"string",
                                            "example":"created"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Comment not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "No query results for model"
                                        },
                                        "error": {
                                            "type": "string",
                                            "example": "Resource not found"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "security":[
                    {
                        "bearerAuth":[] 
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
          "User": {
            "type": "object",
            "properties": {
              "photo": {
                "type": "string",
                "format":"binary"
              },
              "title": {
                "type": "string"
              },
              "phone": {
                "type": "string"
              },
              "email": {
                "type": "string"
              },
              "password": {
                "type": "string"
              },
              "first_name": {
                "type": "string"
              },
              "last_name": {
                "type": "string"
              },
              "role": {
                "type": "string"
              }
            }
          },
          "UserDataResponse":{
            "type":"object",
            "properties":{
                "id": {
                    "type": "integer"
                },
                "first_name": {
                    "type": "string"
                },
                "last_name": {
                    "type": "string"
                },
                "is_admin": {
                    "type": "boolean"
                },
                "email": {
                    "type": "string"
                },
                "location": {
                    "type": "string"
                },
                "postal_code": {
                    "type": "string"
                },
                "phone": {
                    "type": "string"
                },
                "token": {
                    "type": "string"
                }
            }
          },
          "UserLogin": {
            "type": "object",
            "properties": {
              "email": {
                "type": "string"
              },
              "password": {
                "type": "string"
              }
            }
          },
          "UserPassword": {
            "type": "object",
            "properties": {
              "old_password": {
                "type": "string"
              },
              "new_password": {
                "type": "string"
              },
              "confirm_password": {
                "type": "string"
              }
            }
          },
          "CategoryData": {
            "type": "object",
            "properties": {
              "status": {
                "type": "string",
                "example": "success"
              },
              "code": {
                "type": "integer",
                "example": 200
              },
              "message": {
                "type": "string",
                "example": "ok"
              },
              "data": {
                "$ref": "#/components/schemas/Category"
              }
            }
          },
          "Category": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "example": "Tail"
              },
              "image_name": {
                "type": "string"
              },
              "image_url": {
                "type": "string"
              }
            }
          },
          "CommentData": {
            "type": "object",
            "properties": {
              "status": {
                "type": "integer",
                "example": 200
              },
              "message": {
                "type": "string",
                "example": "created"
              },
              "data": {
                "$ref": "#/components/schemas/Comment"
              }
            }
          },
          "CommentDataUpdate": {
            "type": "object",
            "properties": {
              "status": {
                "type": "integer",
                "example": 201
              },
              "message": {
                "type": "string",
                "example": "created"
              },
              "data": {
                "$ref": "#/components/schemas/Comment"
              }
            }
          },
          "Comment": {
            "type": "object",
            "properties": {
              "story_id": {
                "type": "integer",
                "example": 1
              },
              "user_id": {
                "type": "integer",
                "example":1
              },
              "body": {
                "type": "string"
              }
            }
          },
          "StoryDataCreate": {
            "type": "object",
            "properties": {
              "title": {
                "type": "string"
              },
              "body": {
                "type": "string"
              },
              "category_id": {
                "type": "integer"
              },
              "age": {
                "type": "integer"
              },
              "author": {
                "type": "string"
              },
              "story_duration": {
                "type": "string"
              },
              "photo":{
                  "type":"string",
                  "description":"Photo",
                  "format":"binary"
              }
            }
          },
          "StoryCreateResponse":{
            "type":"object",
            "properties":{
                "status":{
                    "type":"string",
                    "example":"success"
                },
                "code":{
                    "type":"integer",
                    "example":200
                },
                "message":{
                    "type":"string",
                    "example":"ok"
                },
                "data":{
                   "$ref":"#/components/schemas/StoryResponseData" 
                }
            }
          },
          "StoryGetResponse":{
            "type":"object",
            "properties":{
                "status":{
                    "type":"string",
                    "example":"success"
                },
                "data":{
                   "$ref":"#/components/schemas/StoryResponseData" 
                }
            }
          },
          "StoryResponseData": {
            "type": "object",
            "properties": {
              "title": {
                "type": "string"
              },
              "body": {
                "type": "string"
              },
              "category_id": {
                "type": "integer"
              },
              "user_id": {
                "type": "integer"
              },
              "age": {
                "type": "integer"
              },
              "author": {
                "type": "string"
              },
              "story_duration": {
                "type": "string"
              },
              "image_url":{
                  "type":"string"
              },
              "image_name":{
                  "type":"string"
              }
            }
          },
          "Status":{
            "type":"object",
            "properties":{
                "status":{
                    "type":"string",
                    "example":"success"
                },
                "code":{
                    "type":"integer",
                    "example":200
                },
                "message":{
                    "type":"string",
                    "example":"ok"
                }
            }
          },
          "404":{
            "type":"object",
            "properties":{
                "error":{
                    "type":"string",
                    "example":"Resource not found"
                },
                "message":{
                    "type":"string",
                    "example":"Not found"
                },
                "code":{
                    "type":"integer",
                    "example":404
                }
            }
          }
        },
        "securitySchemes": {
            "bearerAuth": {
              "type": "http",
              "scheme":"bearer",
              "bearerFormat":"JWT" 
            }
        }
    }
}